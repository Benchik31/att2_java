<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Menu Item</title>
    <link rel="stylesheet" th:href="@{/css/menu.css}">
</head>
<body>
<div class="page">
    <header class="hero compact">
        <div>
            <p class="eyebrow">Menu Studio</p>
            <h1>Edit dish</h1>
            <p class="lead">Update the details of the selected menu item.</p>
        </div>
        <div class="hero-card small">
            <a class="btn ghost" th:href="@{/}">Back to menu</a>
            <form class="inline" th:action="@{/logout}" method="post" sec:authorize="isAuthenticated()">
                <input type="hidden" th:if="${_csrf}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn ghost" type="submit">Logout</button>
            </form>
        </div>
    </header>

    <section class="panel form-panel">
        <div class="panel-title">
            <h2>Edit details</h2>
            <p>Changes are saved immediately after update.</p>
        </div>
        <form class="form-grid" th:action="@{/items/{id}(id=${item.id})}" th:object="${item}" method="post">
            <input type="hidden" th:field="*{id}">
            <input type="hidden" th:if="${_csrf}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <div class="field">
                <label for="dishName">Dish name</label>
                <input id="dishName" type="text" th:field="*{dishName}" placeholder="Truffle risotto">
                <p class="field-error" th:if="${#fields.hasErrors('dishName')}" th:errors="*{dishName}">Dish name error</p>
            </div>
            <div class="field">
                <label for="category">Category</label>
                <input id="category" type="text" th:field="*{category}" placeholder="Main">
                <p class="field-error" th:if="${#fields.hasErrors('category')}" th:errors="*{category}">Category error</p>
            </div>
            <div class="field">
                <label for="price">Price</label>
                <input id="price" type="number" step="0.01" min="0.01" th:field="*{price}" placeholder="12.50">
                <p class="field-error" th:if="${#fields.hasErrors('price')}" th:errors="*{price}">Price error</p>
            </div>
            <div class="field field-action">
                <button class="btn primary" type="submit">Save changes</button>
                <a class="btn ghost" th:href="@{/}">Cancel</a>
            </div>
        </form>
    </section>
</div>
</body>
</html>
